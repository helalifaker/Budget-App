# Backend Development Environment Variables
# ⚠️  SECURITY: Never commit this file to git. It's in .gitignore and should stay private.

# ========== SUPABASE DATABASE CONFIGURATION ==========
# After rotating your keys in Supabase Dashboard, update these values:
# 1. Go to: https://supabase.com/dashboard
# 2. Project Settings → Database → Reset password
# 3. Update YOUR_NEW_PASSWORD below with the new password

# Connection pooler URL (for regular app connections)
DATABASE_URL="postgresql+asyncpg://postgres.PROJECT_REF:YOUR_PASSWORD@aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection URL (for Alembic migrations - bypasses pooler)
DIRECT_URL="postgresql+asyncpg://postgres.PROJECT_REF:YOUR_PASSWORD@db.PROJECT_REF.supabase.co:5432/postgres"

# ========== SUPABASE API CONFIGURATION ==========
SUPABASE_URL="https://PROJECT_REF.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="your_service_role_key_here"

# ========== API SERVER CONFIGURATION ==========
API_HOST="0.0.0.0"
API_PORT="8000"
ENVIRONMENT="development"

# ========== SENTRY CONFIGURATION ==========
# Sentry DSN for backend error tracking
# Get this from: https://sentry.io/settings/YOUR_ORG/projects/YOUR_PROJECT/keys/
SENTRY_DSN_BACKEND="https://xxx@yyy.ingest.sentry.io/zzz"

# Environment name (development, staging, production)
SENTRY_ENVIRONMENT="development"

# Percentage of transactions to send to Sentry (0.0 to 1.0)
# 0.1 = 10% of requests, 1.0 = 100% of requests
SENTRY_TRACES_SAMPLE_RATE="0.1"

# Git commit SHA for release tracking (automatically set in CI/CD)
GIT_COMMIT_SHA="dev"

# ========== REDIS CONFIGURATION ==========
# Redis connection URL for caching layer
# Format: redis://[username:password@]host:port/db_number
REDIS_URL="redis://localhost:6379/0"

# Enable/disable Redis caching
# Set to "false" to disable all caching functionality
REDIS_ENABLED="true"

# Fail application startup if Redis is unavailable (when REDIS_ENABLED=true)
# - "false" (default): Graceful degradation - app runs without caching if Redis down
# - "true": Application fails to start if Redis unavailable (production mode)
REDIS_REQUIRED="false"

# Redis connection timeout in seconds
# Maximum time to wait when establishing a connection to Redis
REDIS_CONNECT_TIMEOUT="5"

# Redis socket operation timeout in seconds
# Maximum time to wait for Redis operations (ping, get, set, etc.)
REDIS_SOCKET_TIMEOUT="5"

# Maximum number of retry attempts for failed Redis operations
# Applies to automatic retries for transient connection issues
REDIS_MAX_RETRIES="3"

# ========== AUTHENTICATION CONFIGURATION ==========
# Supabase JWT Secret (REQUIRED for backend authentication)
# Get from: Supabase Dashboard > Settings > API > JWT Settings > JWT Secret
# IMPORTANT: This must match your Supabase project's JWT secret
SUPABASE_JWT_SECRET="your-jwt-secret-here"

# Test bypass mode (DEVELOPMENT/TESTING ONLY - DO NOT USE IN PRODUCTION)
# Set to "true" ONLY if you need to bypass JWT verification temporarily
# Default: false (real Supabase authentication enabled)
# WARNING: When enabled, uses fixed test UUID instead of real user authentication
SKIP_AUTH_FOR_TESTS="false"
